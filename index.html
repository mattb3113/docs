<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BuellDocs v4 - Paystub Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Inconsolata&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="print.css" media="print">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <h1>Paystub Generator</h1>
            <p>Create accurate, professional paystubs for New Jersey (2025)</p>
        </header>

        <main class="main-content">
            <div class="form-column">
                <form id="paystub-form" autocomplete="off">
                    <fieldset>
                        <legend>Company Information</legend>
                        <div class="form-group">
                            <label for="companyName">Company Name</label>
                            <input type="text" id="companyName" name="companyName" required>
                        </div>
                        <div class="form-group">
                            <label for="companyAddress">Company Address</label>
                            <input type="text" id="companyAddress" name="companyAddress" required>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Employee Information</legend>
                         <div class="form-group">
                            <label for="employeeName">Employee Name</label>
                            <input type="text" id="employeeName" name="employeeName" required>
                        </div>
                        <div class="form-group">
                            <label for="employeeAddress">Employee Address</label>
                            <input type="text" id="employeeAddress" name="employeeAddress" required>
                        </div>
                        <div class="form-group">
                            <label for="employeeSSN">SSN (for MICR line)</label>
                            <input type="text" id="employeeSSN" name="employeeSSN" placeholder="XXX-XX-XXXX">
                        </div>
                    </fieldset>

                    <fieldset>
                         <legend>Pay Period & Payday</legend>
                         <div class="form-grid">
                            <div class="form-group">
                                <label for="payPeriodStart">Pay Period Start</label>
                                <input type="date" id="payPeriodStart" name="payPeriodStart" required>
                            </div>
                            <div class="form-group">
                                <label for="payDate">Pay Date</label>
                                <input type="date" id="payDate" name="payDate" required>
                            </div>
                         </div>
                         <div class="form-group">
                             <label>Pay Frequency</label>
                             <select id="payFrequency" name="payFrequency">
                                 <option value="weekly">Weekly</option>
                                 <option value="bi-weekly" selected>Bi-Weekly</option>
                                 <option value="semi-monthly">Semi-Monthly</option>
                                 <option value="monthly">Monthly</option>
                             </select>
                         </div>
                    </fieldset>

                    <fieldset>
                        <legend>Current Earnings</legend>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="regularHours">Regular Hours</label>
                                <input type="number" id="regularHours" name="regularHours" step="0.01" value="80">
                            </div>
                            <div class="form-group">
                                <label for="regularRate">Regular Rate ($)</label>
                                <input type="number" id="regularRate" name="regularRate" step="0.01">
                            </div>
                            <div class="form-group">
                                <label for="otHours">Overtime Hours</label>
                                <input type="number" id="otHours" name="otHours" step="0.01" value="0">
                            </div>
                             <div class="form-group">
                                <label for="otRate">Overtime Rate ($)</label>
                                <input type="number" id="otRate" name="otRate" step="0.01" placeholder="Auto 1.5x">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="bonus">Bonus ($)</label>
                            <input type="number" id="bonus" name="bonus" step="0.01" value="0">
                        </div>
                    </fieldset>
                    
                    <fieldset>
                        <legend>Year-to-Date Totals (before this pay period)</legend>
                        <div class="form-grid ytd-grid">
                            <div class="form-group"><label for="ytdGross">Gross</label><input type="number" name="ytdGross" id="ytdGross" step="0.01" value="0"></div>
                            <div class="form-group"><label for="ytdFederalTax">Federal</label><input type="number" name="ytdFederalTax" id="ytdFederalTax" step="0.01" value="0"></div>
                            <div class="form-group"><label for="ytdSocialSecurity">Soc. Sec.</label><input type="number" name="ytdSocialSecurity" id="ytdSocialSecurity" step="0.01" value="0"></div>
                            <div class="form-group"><label for="ytdMedicare">Medicare</label><input type="number" name="ytdMedicare" id="ytdMedicare" step="0.01" value="0"></div>
                            <div class="form-group"><label for="ytdNJStateTax">NJ State</label><input type="number" name="ytdNJStateTax" id="ytdNJStateTax" step="0.01" value="0"></div>
                            <div class="form-group"><label for="ytdSUI">NJ SUI</label><input type="number" name="ytdSUI" id="ytdSUI" step="0.01" value="0"></div>
                            <div class="form-group"><label for="ytdSDI">NJ SDI</label><input type="number" name="ytdSDI" id="ytdSDI" step="0.01" value="0"></div>
                            <div class="form-group"><label for="ytdFLI">NJ FLI</label><input type="number" name="ytdFLI" id="ytdFLI" step="0.01" value="0"></div>
                        </div>
                    </fieldset>
                    
                    <fieldset>
                        <legend>Tax Details</legend>
                        <div class="form-group">
                            <label>Federal Filing Status</label>
                            <div class="radio-group">
                                <label><input type="radio" name="filingStatus" value="single" checked> Single</label>
                                <label><input type="radio" name="filingStatus" value="married"> Married</label>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>

            <div class="preview-column">
                <div class="preview-actions">
                     <button id="download-pdf-btn" class="action-btn">Download PDF</button>
                     <button id="print-btn" class="action-btn">Print</button>
                     <div id="loader" style="display: none;">Generating...</div>
                </div>
                <div id="error-container" class="error-message" style="display: none;"></div>
                <div id="preview-container">
                    <div class="paystub">
                        <div class="stub-header">
                            <div><strong><span id="company-name-preview"></span></strong></div>
                            <div><span id="company-address-preview"></span></div>
                            <div class="stub-title">EARNINGS STATEMENT</div>
                        </div>
                        <div class="stub-info">
                            <div><strong>Employee:</strong> <span id="employee-name-preview"></span></div>
                            <div><strong>Address:</strong> <span id="employee-address-preview"></span></div>
                            <div><strong>Pay Date:</strong> <span id="pay-date-preview"></span></div>
                            <div><strong>Pay Period Start:</strong> <span id="pay-period-start-preview"></span></div>
                        </div>
                        <div class="stub-details">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Description</th>
                                        <th>Current</th>
                                        <th>YTD</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="section-header"><td colspan="3">Earnings</td></tr>
                                    <tr><td>Regular Pay</td><td id="regular-pay-current"></td><td>-</td></tr>
                                    <tr><td>Overtime Pay</td><td id="ot-pay-current"></td><td>-</td></tr>
                                    <tr><td>Bonus</td><td id="bonus-current"></td><td>-</td></tr>
                                    <tr class="total-row"><td>Gross Pay</td><td id="gross-pay-current"></td><td id="gross-pay-ytd"></td></tr>
                                    <tr class="section-header"><td colspan="3">Deductions</td></tr>
                                    <tr><td>Federal Income Tax</td><td id="fed-tax-current"></td><td id="fed-tax-ytd"></td></tr>
                                    <tr><td>Social Security</td><td id="ss-tax-current"></td><td id="ss-tax-ytd"></td></tr>
                                    <tr><td>Medicare</td><td id="medicare-tax-current"></td><td id="medicare-tax-ytd"></td></tr>
                                    <tr><td>NJ State Tax</td><td id="nj-tax-current"></td><td id="nj-tax-ytd"></td></tr>
                                    <tr><td>NJ SUI/SDI</td><td id="nj-sui-current"></td><td id="nj-sui-ytd"></td></tr>
                                    <tr><td>NJ FLI</td><td id="nj-fli-current"></td><td id="nj-fli-ytd"></td></tr>
                                    <tr class="total-row"><td>Total Deductions</td><td id="total-deductions-current"></td><td>-</td></tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="stub-summary">
                            <div>Net Pay: <span id="net-pay-current"></span></div>
                        </div>
                    </div>
                    <div class="check">
                        <div class="check-header">
                            <div class="company-info">
                                <strong><span id="check-company-name"></span></strong>
                            </div>
                            <div class="check-number-date">
                                <div>Date: <span id="check-pay-date"></span></div>
                            </div>
                        </div>
                        <div class="check-body">
                            <div class="pay-to">
                                Pay to the order of: <span class="payee" id="check-employee-name"></span>
                            </div>
                            <div class="amount-box">
                                $<span id="check-amount-numeric"></span>
                            </div>
                        </div>
                        <div class="check-written-amount">
                             <span id="check-amount-written"></span>
                        </div>
                        <div class="check-footer">
                            <div class="memo">
                                <strong>Memo:</strong> Payroll
                            </div>
                            <div class="signature">
                                <div class="signature-line"></div>
                                Authorized Signature
                            </div>
                        </div>
                        <div class="micr-line">
                            <span id="check-micr-line"></span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script type="module" src="script.js" defer></script>
</body>
</html>
