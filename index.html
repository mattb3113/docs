<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BuellDocs Paystub Generator (Canvas)</title>
    <link rel="stylesheet" href="styles.css">
    <!-- CDNs for jsPDF and jsPDF-AutoTable -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <div class="noise-overlay"></div>
    <div class="backdrop-glow"></div>

    <header class="app-header">
        <div class="logo-container">
            <span class="logo-text">BUELLDOCS</span>
            <span class="header-tagline">Secure Document Services</span>
        </div>
        <nav class="header-nav">
            <a href="index.html" class="nav-link">Home</a>
            <a href="about_buelldocs.html" class="nav-link">About</a>
            <a href="#" class="nav-link">Services</a>
            <a href="#" class="nav-link">Contact</a>
        </nav>
    </header>

    <div class="main-wrapper">
        <aside class="sidebar">
            <div class="sidebar-content">
                <h2 class="sidebar-title">Global Controls</h2>

                <div class="form-group">
                    <label for="numPaystubs">Number of Paystubs Needed</label>
                    <select id="numPaystubs" name="numPaystubs">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>

                <div class="form-group" id="hourlyPayFrequencyGroup" style="display: none;">
                    <label for="hourlyPayFrequency">Pay Frequency (for Hourly - Multiple Stubs)</label>
                    <select id="hourlyPayFrequency" name="hourlyPayFrequency">
                        <option value="Weekly" selected>Weekly</option>
                        <option value="Bi-Weekly">Bi-Weekly</option>
                    </select>
                </div>

                <button id="resetAllFields" class="btn btn-secondary btn-full-width">Reset All Fields</button>
                <button id="saveDraft" class="btn btn-secondary btn-full-width">Save Draft</button>
                <button id="loadDraft" class="btn btn-secondary btn-full-width">Load Draft</button>
                <button id="estimateDeductions" class="btn btn-secondary btn-full-width">Estimate All Deductions</button>
                <button id="previewPdfWatermarked" class="btn btn-secondary btn-full-width">Preview PDF (Watermarked)</button>
                <button id="generateAndPay" class="btn btn-primary btn-full-width">Generate & Proceed to Payment</button>
            </div>
        </aside>

        <main class="main-content">
            <section class="hero-section">
                <h1>BuellDocs Paystub Generator (Canvas)</h1>
                <p>Follow the new workflow below to quickly create your draft paystub.</p>
            </section>

            <form id="paystubForm">
                <!-- Step 1: Desired Income Representation -->
                <section class="form-section-card">
                    <h3>Step 1: Define Your Desired Income Representation</h3>
                    <div class="grid-col-2">
                        <div class="form-group">
                            <label for="desiredIncomeAmount">Desired Income Amount <span class="required-asterisk">*</span></label>
                            <input type="number" id="desiredIncomeAmount" name="desiredIncomeAmount" step="0.01" min="0">
                        </div>
                        <div class="form-group">
                            <label>Is this income amount:</label>
                            <div class="radio-group">
                                <input type="radio" name="desiredIncomeType" id="desiredIncomeTypeGross" value="Gross" checked>
                                <label for="desiredIncomeTypeGross">Before Taxes &amp; Deductions (Gross Income)</label>
                                <input type="radio" name="desiredIncomeType" id="desiredIncomeTypeNet" value="Net">
                                <label for="desiredIncomeTypeNet">After Estimated Taxes &amp; Deductions (Target Net Income)</label>
                            </div>
                            <p id="netIncomeAdjustmentNote" class="info-text" style="display:none;"></p>
                        </div>
                        <div class="form-group">
                            <label for="desiredIncomePeriod">Income Period <span class="required-asterisk">*</span></label>
                            <select id="desiredIncomePeriod" name="desiredIncomePeriod">
                                <option value="Annual" selected>Annual</option>
                                <option value="Monthly">Monthly</option>
                                <option value="Weekly">Weekly</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Represent As <span class="required-asterisk">*</span></label>
                        <div class="radio-group">
                            <label><input type="radio" id="repAsSalaried" name="incomeRepresentationType" value="Salaried" checked> Salaried</label>
                            <label><input type="radio" id="repAsHourly" name="incomeRepresentationType" value="Hourly"> Hourly</label>
                        </div>
                    </div>
                    <div class="form-group" id="assumedHourlyHoursGroup" style="display:none;">
                        <label for="assumedHourlyRegularHours">Assumed Regular Hours per Period for Representation</label>
                        <input type="number" id="assumedHourlyRegularHours" name="assumedHourlyRegularHours" step="0.01" min="0" value="40">
                    </div>
                    <div class="form-group checkbox-group">
                        <label for="isForNJEmployment">
                            <input type="checkbox" id="isForNJEmployment" name="isForNJEmployment" checked>
                            This representation is for New Jersey employment (auto-populates standard NJ taxes/deductions).
                        </label>
                    </div>
                    <button type="button" id="populateDetailsBtn" class="btn btn-primary">Calculate &amp; Fill Paystub Details &#10132;</button>
                </section>
                <!-- Employer Information -->
                <section class="form-section-card form-section-minimized">
                    <h3>Employer Information</h3>
                    <div class="grid-col-2">
                        <div class="form-group">
                            <label for="companyName">Company Name <span class="required-asterisk">*</span></label>
                            <input type="text" id="companyName" name="companyName" required aria-describedby="companyNameError" aria-required="true">
                            <span class="error-message" id="companyNameError"></span>
                        </div>
                        <div class="form-group">
                            <label for="companyPhone">Company Phone</label>
                            <input type="tel" id="companyPhone" name="companyPhone" aria-describedby="companyPhoneError">
                            <span class="error-message" id="companyPhoneError"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="companyStreetAddress">Company Street Address</label>
                        <input type="text" id="companyStreetAddress" name="companyStreetAddress" aria-describedby="companyStreetAddressError">
                        <span class="error-message" id="companyStreetAddressError"></span>
                    </div>
                    <div class="grid-col-3">
                        <div class="form-group">
                            <label for="companyCity">City</label>
                            <input type="text" id="companyCity" name="companyCity" aria-describedby="companyCityError">
                            <span class="error-message" id="companyCityError"></span>
                        </div>
                        <div class="form-group">
                            <label for="companyState">State</label>
                            <input type="text" id="companyState" name="companyState" aria-describedby="companyStateError">
                            <span class="error-message" id="companyStateError"></span>
                        </div>
                        <div class="form-group">
                            <label for="companyZip">ZIP Code</label>
                            <input type="text" id="companyZip" name="companyZip" aria-describedby="companyZipError">
                            <span class="error-message" id="companyZipError"></span>
                        </div>
                    </div>
                     <div class="grid-col-2">
                        <div class="form-group">
                            <label for="companyEin">Company EIN</label>
                            <input type="text" id="companyEin" name="companyEin" aria-describedby="companyEinError">
                            <span class="error-message" id="companyEinError"></span>
                        </div>
                        <div class="form-group">
                            <label for="companyLogo">Upload Company Logo</label>
                            <input type="file" id="companyLogo" name="companyLogo" accept="image/*" aria-describedby="companyLogoError">
                            <div class="logo-preview-container" id="companyLogoPreviewContainer">
                                <img id="companyLogoPreview" src="#" alt="Company Logo Preview" style="display:none;">
                                <div class="logo-placeholder-text">Logo Preview</div>
                            </div>
                            <span class="error-message" id="companyLogoError"></span>
                        </div>
                    </div>
                </section>

                <!-- Employee Information -->
                <section class="form-section-card form-section-minimized">
                    <h3>Employee Information</h3>
                    <div class="form-group">
                        <label for="employeeFullName">Employee Full Name <span class="required-asterisk">*</span></label>
                        <input type="text" id="employeeFullName" name="employeeFullName" required aria-describedby="employeeFullNameError" aria-required="true">
                        <span class="error-message" id="employeeFullNameError"></span>
                    </div>
                    <div class="form-group">
                        <label for="employeeStreetAddress">Employee Street Address</label>
                        <input type="text" id="employeeStreetAddress" name="employeeStreetAddress" aria-describedby="employeeStreetAddressError">
                        <span class="error-message" id="employeeStreetAddressError"></span>
                    </div>
                    <div class="grid-col-3">
                        <div class="form-group">
                            <label for="employeeCity">City</label>
                            <input type="text" id="employeeCity" name="employeeCity" aria-describedby="employeeCityError">
                            <span class="error-message" id="employeeCityError"></span>
                        </div>
                        <div class="form-group">
                            <label for="employeeState">State</label>
                            <input type="text" id="employeeState" name="employeeState" aria-describedby="employeeStateError">
                            <span class="error-message" id="employeeStateError"></span>
                        </div>
                        <div class="form-group">
                            <label for="employeeZip">ZIP Code</label>
                            <input type="text" id="employeeZip" name="employeeZip" aria-describedby="employeeZipError">
                            <span class="error-message" id="employeeZipError"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="employeeSsn">Employee SSN (XXX-XX-NNNN)</label>
                        <input type="text" id="employeeSsn" name="employeeSsn" placeholder="XXX-XX-NNNN" aria-describedby="employeeSsnError">
                        <span class="error-message" id="employeeSsnError"></span>
                    </div>
                </section>

                <!-- Pay Period & Dates (For First/Base Stub) -->
                <section class="form-section-card form-section-minimized">
                    <h3>Pay Period & Dates (For First/Base Stub)</h3>
                    <p class="info-text">For multiple stubs, subsequent dates auto-increment based on pay frequency.</p>
                    <div class="grid-col-3">
                        <div class="form-group">
                            <label for="payPeriodStartDate">Pay Period Start Date <span class="required-asterisk">*</span></label>
                            <input type="date" id="payPeriodStartDate" name="payPeriodStartDate" required aria-describedby="payPeriodStartDateError" aria-required="true">
                            <span class="error-message" id="payPeriodStartDateError"></span>
                        </div>
                        <div class="form-group">
                            <label for="payPeriodEndDate">Pay Period End Date <span class="required-asterisk">*</span></label>
                            <input type="date" id="payPeriodEndDate" name="payPeriodEndDate" required aria-describedby="payPeriodEndDateError" aria-required="true">
                            <span class="error-message" id="payPeriodEndDateError"></span>
                        </div>
                        <div class="form-group">
                            <label for="payDate">Pay Date <span class="required-asterisk">*</span></label>
                            <input type="date" id="payDate" name="payDate" required aria-describedby="payDateError" aria-required="true">
                            <span class="error-message" id="payDateError"></span>
                        </div>
                    </div>
                </section>

                <!-- Earnings -->
                <section class="form-section-card form-section-minimized">
                    <h3>Earnings</h3>
                    <div class="form-group">
                        <label>Employment Type <span class="required-asterisk">*</span></label>
                        <div class="radio-group">
                            <label><input type="radio" name="employmentType" value="Hourly" checked aria-describedby="employmentTypeError"> Hourly</label>
                            <label><input type="radio" name="employmentType" value="Salaried" aria-describedby="employmentTypeError"> Salaried</label>
                        </div>
                        <span class="error-message" id="employmentTypeError"></span>
                    </div>

                    <div id="hourlyFields">
                        <div class="grid-col-3">
                            <div class="form-group">
                                <label for="hourlyRate">Hourly Rate <span class="required-asterisk">*</span></label>
                                <input type="number" id="hourlyRate" name="hourlyRate" step="0.01" min="0" value="0" aria-describedby="hourlyRateError">
                                <span class="error-message" id="hourlyRateError"></span>
                            </div>
                            <div class="form-group">
                                <label for="regularHours">Regular Hours (per period) <span class="required-asterisk">*</span></label>
                                <input type="number" id="regularHours" name="regularHours" step="0.01" min="0" value="0" aria-describedby="regularHoursError">
                                <span class="error-message" id="regularHoursError"></span>
                            </div>
                            <div class="form-group">
                                <label for="overtimeHours">Overtime Hours (per period)</label>
                                <input type="number" id="overtimeHours" name="overtimeHours" step="0.01" min="0" value="0" aria-describedby="overtimeHoursError">
                                <span class="error-message" id="overtimeHoursError"></span>
                            </div>
                        </div>
                    </div>

                    <div id="salariedFields" style="display:none;">
                        <div class="grid-col-2">
                            <div class="form-group">
                                <label for="annualSalary">Annual Salary <span class="required-asterisk">*</span></label>
                                <input type="number" id="annualSalary" name="annualSalary" step="0.01" min="0" value="0" aria-describedby="annualSalaryError">
                                <span class="error-message" id="annualSalaryError"></span>
                            </div>
                            <div class="form-group">
                                <label for="salariedPayFrequency">Pay Frequency (Salaried) <span class="required-asterisk">*</span></label>
                                <select id="salariedPayFrequency" name="salariedPayFrequency" aria-describedby="salariedPayFrequencyError">
                                    <option value="Weekly">Weekly</option>
                                    <option value="Bi-Weekly" selected>Bi-Weekly</option>
                                    <option value="Semi-Monthly">Semi-Monthly</option>
                                    <option value="Monthly">Monthly</option>
                                </select>
                                <span class="error-message" id="salariedPayFrequencyError"></span>
                            </div>
                        </div>
                    </div>
                    
                    <h4>Other Earnings (Per Period)</h4>
                    <div class="grid-col-3">
                         <div class="form-group">
                            <label for="bonus">Bonus</label>
                            <input type="number" id="bonus" name="bonus" step="0.01" min="0" value="0" aria-describedby="bonusError">
                            <span class="error-message" id="bonusError"></span>
                        </div>
                        <div class="form-group">
                            <label for="miscEarningName">Miscellaneous Earning Name</label>
                            <input type="text" id="miscEarningName" name="miscEarningName" placeholder="e.g., Commission" aria-describedby="miscEarningNameError">
                            <span class="error-message" id="miscEarningNameError"></span>
                        </div>
                        <div class="form-group">
                            <label for="miscEarningAmount">Miscellaneous Earning Amount</label>
                            <input type="number" id="miscEarningAmount" name="miscEarningAmount" step="0.01" min="0" value="0" aria-describedby="miscEarningAmountError">
                            <span class="error-message" id="miscEarningAmountError"></span>
                        </div>
                    </div>
                </section>

                <!-- Taxes (Enter Amounts per Period - Simulation Only) -->
                <section class="form-section-card form-section-minimized">
                    <h3>Taxes (Enter Amounts per Period - Simulation Only)</h3>
                     <div class="grid-col-2">
                        <div class="form-group">
                            <label for="federalTaxAmount">Federal Tax Amount</label>
                            <input type="number" id="federalTaxAmount" name="federalTaxAmount" step="0.01" min="0" value="0" aria-describedby="federalTaxAmountError">
                            <span class="error-message" id="federalTaxAmountError"></span>
                        </div>
                        <div class="form-group">
                            <label for="socialSecurityAmount">Social Security Amount</label>
                            <input type="number" id="socialSecurityAmount" name="socialSecurityAmount" step="0.01" min="0" value="0" aria-describedby="socialSecurityAmountError">
                            <span class="error-message" id="socialSecurityAmountError"></span>
                        </div>
                        <div class="form-group checkbox-group">
                            <label for="autoCalculateSocialSecurity">
                                <input type="checkbox" id="autoCalculateSocialSecurity" name="autoCalculateSocialSecurity">
                                Auto-calculate Social Security?
                            </label>
                        </div>
                    </div>
                    <div class="grid-col-2">
                        <div class="form-group">
                            <label for="stateTaxName">State Tax Name</label>
                            <input type="text" id="stateTaxName" name="stateTaxName" placeholder="e.g., NJ State Tax" aria-describedby="stateTaxNameError">
                            <span class="error-message" id="stateTaxNameError"></span>
                        </div>
                        <div class="form-group">
                            <label for="stateTaxAmount">State Tax Amount</label>
                            <input type="number" id="stateTaxAmount" name="stateTaxAmount" step="0.01" min="0" value="0" aria-describedby="stateTaxAmountError">
                            <span class="error-message" id="stateTaxAmountError"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="medicareAmount">Medicare Amount</label>
                        <input type="number" id="medicareAmount" name="medicareAmount" step="0.01" min="0" value="0" aria-describedby="medicareAmountError">
                        <span class="error-message" id="medicareAmountError"></span>
                    </div>
                    <div class="form-group checkbox-group">
                        <label for="autoCalculateMedicare">
                            <input type="checkbox" id="autoCalculateMedicare" name="autoCalculateMedicare">
                            Auto-calculate Medicare?
                        </label>
                    </div>
                </section>

                <!-- State-Specific Deductions/Taxes (New Jersey) -->
                <section class="form-section-card form-section-minimized">
                    <h3>State-Specific Deductions/Taxes (New Jersey - Enter Amounts per Period)</h3>
                    <div class="grid-col-3">
                        <div class="form-group">
                            <label for="njSdiAmount">NJ SDI Amount</label>
                            <input type="number" id="njSdiAmount" name="njSdiAmount" step="0.01" min="0" value="0" aria-describedby="njSdiAmountError">
                            <span class="error-message" id="njSdiAmountError"></span>
                        </div>
                        <div class="form-group">
                            <label for="njFliAmount">NJ FLI Amount</label>
                            <input type="number" id="njFliAmount" name="njFliAmount" step="0.01" min="0" value="0" aria-describedby="njFliAmountError">
                            <span class="error-message" id="njFliAmountError"></span>
                        </div>
                        <div class="form-group">
                            <label for="njUiHcWfAmount">NJ UI/HC/WF Amount</label>
                            <input type="number" id="njUiHcWfAmount" name="njUiHcWfAmount" step="0.01" min="0" value="0" aria-describedby="njUiHcWfAmountError">
                            <span class="error-message" id="njUiHcWfAmountError"></span>
                        </div>
                    </div>
                </section>

                <!-- Other Deductions (Optional) -->
                <section class="form-section-card form-section-minimized">
                    <h3>Other Deductions (Enter Amounts per Period - Optional)</h3>
                    <div class="grid-col-2">
                        <div class="form-group">
                            <label for="healthInsurance">Health Insurance</label>
                            <input type="number" id="healthInsurance" name="healthInsurance" step="0.01" min="0" value="0" aria-describedby="healthInsuranceError">
                            <span class="error-message" id="healthInsuranceError"></span>
                        </div>
                        <div class="form-group">
                            <label for="retirement401k">Retirement (e.g., 401k)</label>
                            <input type="number" id="retirement401k" name="retirement401k" step="0.01" min="0" value="0" aria-describedby="retirement401kError">
                            <span class="error-message" id="retirement401kError"></span>
                        </div>
                    </div>
                    <div class="grid-col-2">
                        <div class="form-group">
                            <label for="otherDeductionName">Other Deduction Name</label>
                            <input type="text" id="otherDeductionName" name="otherDeductionName" placeholder="e.g., Union Dues" aria-describedby="otherDeductionNameError">
                            <span class="error-message" id="otherDeductionNameError"></span>
                        </div>
                        <div class="form-group">
                            <label for="otherDeductionAmount">Other Deduction Amount</label>
                            <input type="number" id="otherDeductionAmount" name="otherDeductionAmount" step="0.01" min="0" value="0" aria-describedby="otherDeductionAmountError">
                            <span class="error-message" id="otherDeductionAmountError"></span>
                        </div>
                    </div>
                </section>

                <!-- Initial Year-to-Date (YTD) Figures -->
                <section class="form-section-card form-section-minimized">
                    <h3>Initial Year-to-Date (YTD) Figures</h3>
                    <p class="info-text">Enter YTD amounts *before* the first paystub in this batch. These accumulate for multiple stubs.</p>
                    <div class="grid-col-2">
                        <div class="form-group">
                            <label for="initialYtdGrossPay">Initial YTD Gross Pay</label>
                            <input type="number" id="initialYtdGrossPay" name="initialYtdGrossPay" step="0.01" min="0" value="0">
                        </div>
                        <div class="form-group">
                            <label for="initialYtdFederalTax">Initial YTD Federal Tax</label>
                            <input type="number" id="initialYtdFederalTax" name="initialYtdFederalTax" step="0.01" min="0" value="0">
                        </div>
                    </div>
                    <div class="grid-col-2">
                        <div class="form-group">
                            <label for="initialYtdStateTax">Initial YTD State Tax</label>
                            <input type="number" id="initialYtdStateTax" name="initialYtdStateTax" step="0.01" min="0" value="0">
                        </div>
                        <div class="form-group">
                            <label for="initialYtdSocialSecurity">Initial YTD Social Security</label>
                            <input type="number" id="initialYtdSocialSecurity" name="initialYtdSocialSecurity" step="0.01" min="0" value="0">
                        </div>
                    </div>
                     <div class="grid-col-2">
                        <div class="form-group">
                            <label for="initialYtdMedicare">Initial YTD Medicare</label>
                            <input type="number" id="initialYtdMedicare" name="initialYtdMedicare" step="0.01" min="0" value="0">
                        </div>
                        <div class="form-group">
                            <label for="initialYtdNjSdi">Initial YTD NJ SDI</label>
                            <input type="number" id="initialYtdNjSdi" name="initialYtdNjSdi" step="0.01" min="0" value="0">
                        </div>
                    </div>
                    <div class="grid-col-2">
                        <div class="form-group">
                            <label for="initialYtdNjFli">Initial YTD NJ FLI</label>
                            <input type="number" id="initialYtdNjFli" name="initialYtdNjFli" step="0.01" min="0" value="0">
                        </div>
                        <div class="form-group">
                            <label for="initialYtdNjUiHcWf">Initial YTD NJ UI/HC/WF</label>
                            <input type="number" id="initialYtdNjUiHcWf" name="initialYtdNjUiHcWf" step="0.01" min="0" value="0">
                        </div>
                    </div>
                </section>

                <!-- Optional Additions -->
                <section class="form-section-card form-section-minimized">
                    <h3>Optional Additions</h3>
                     <div class="grid-col-2">
                        <div class="form-group">
                            <label for="payrollProviderLogo">Upload Payroll Provider Logo</label>
                            <input type="file" id="payrollProviderLogo" name="payrollProviderLogo" accept="image/*" aria-describedby="payrollProviderLogoError">
                             <div class="logo-preview-container" id="payrollProviderLogoPreviewContainer">
                                <img id="payrollProviderLogoPreview" src="#" alt="Payroll Provider Logo Preview" style="display:none;">
                                <div class="logo-placeholder-text">Logo Preview</div>
                            </div>
                            <span class="error-message" id="payrollProviderLogoError"></span>
                        </div>
                        <div class="form-group checkbox-group">
                             <label for="includeVoidedCheck">
                                <input type="checkbox" id="includeVoidedCheck" name="includeVoidedCheck">
                                Include Sample Voided Check Image
                            </label>
                        </div>
                    </div>
                </section>

                <!-- User Notes & Submission -->
                <section class="form-section-card form-section-minimized">
                    <h3>Notes & Submission</h3>
                    <div class="form-group">
                        <label for="userNotes">Additional instructions or custom requests (optional)</label>
                        <textarea id="userNotes" name="userNotes" rows="3" aria-describedby="userNotesError"></textarea>
                        <span class="error-message" id="userNotesError"></span>
                    </div>
                    <div class="form-group">
                        <label for="userEmail">Your Email (for order confirmation) <span class="required-asterisk">*</span></label>
                        <input type="email" id="userEmail" name="userEmail" required aria-describedby="userEmailError" aria-required="true">
                        <span class="error-message" id="userEmailError"></span>
                    </div>
                </section>
            </form>

            <div class="summary-bar">
                <div>Live Gross Pay: <span id="summaryGrossPay">$0.00</span></div>
                <div>Live Total Deductions: <span id="summaryTotalDeductions">$0.00</span></div>
                <div>Live Net Pay: <span id="summaryNetPay">$0.00</span></div>
            </div>

            <!-- Live HTML Preview Section -->
            <section id="previewSection" class="preview-section-card">
                <h3>Live Paystub Preview <span id="previewStubIndicator">(Previewing Stub: 1 of 1)</span></h3>
                <div class="preview-nav-controls" style="display: none; margin-bottom: 10px; text-align: center;">
                    <button id="prevStubBtn" class="btn btn-secondary btn-sm">&laquo; Previous Stub</button>
                    <button id="nextStubBtn" class="btn btn-secondary btn-sm" style="margin-left: 10px;">Next Stub &raquo;</button>
                </div>
                <div class="preview-watermark">SIMULATION ONLY - PREVIEW</div>
                <div id="paystubPreviewContent" class="paystub-live-preview" aria-live="polite" aria-atomic="true">
                    <!-- Content will be dynamically generated by JavaScript -->
                    <div class="paystub-header-preview">
                        <div class="company-info-left">
                            <img id="livePreviewCompanyLogo" src="#" alt="Company Logo" class="live-preview-logo" style="display:none;">
                            <div id="livePreviewCompanyName">Your Company Name</div>
                            <div id="livePreviewCompanyAddress1">123 Main St</div>
                            <div id="livePreviewCompanyAddress2">Anytown, ST 12345</div>
                            <div id="livePreviewCompanyPhone">Phone: (555) 123-4567</div>
                            <div id="livePreviewCompanyEin">EIN: XX-XXXXXXX</div>
                        </div>
                        <div class="paystub-title-preview">
                            <h2>EARNINGS STATEMENT</h2>
                            <div id="livePreviewStubXofY">Stub 1 of 1</div>
                        </div>
                    </div>

                    <div class="employee-pay-period-preview">
                        <div class="employee-info-preview">
                            <h4>Employee</h4>
                            <div id="livePreviewEmployeeName">Employee Name</div>
                            <div id="livePreviewEmployeeAddress1">456 Employee Ave</div>
                            <div id="livePreviewEmployeeAddress2">Workville, ST 67890</div>
                            <div id="livePreviewEmployeeSsn">SSN: XXX-XX-NNNN</div>
                        </div>
                        <div class="pay-period-info-preview">
                            <h4>Pay Period</h4>
                            <div>Start Date: <span id="livePreviewPayPeriodStart">YYYY-MM-DD</span></div>
                            <div>End Date: <span id="livePreviewPayPeriodEnd">YYYY-MM-DD</span></div>
                            <div>Pay Date: <span id="livePreviewPayDate">YYYY-MM-DD</span></div>
                        </div>
                    </div>

                    <table class="earnings-table-preview">
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th>Hours</th>
                                <th>Rate</th>
                                <th>Current Period</th>
                                <th>Year-to-Date</th>
                            </tr>
                        </thead>
                        <tbody id="livePreviewEarningsBody">
                            <!-- Example Row (Static for initial display, JS will populate) -->
                            <tr>
                                <td>Regular Pay</td>
                                <td data-label="Hours">40.00</td>
                                <td data-label="Rate">$25.00</td>
                                <td data-label="Current Period">$1000.00</td>
                                <td data-label="Year-to-Date">$1000.00</td>
                            </tr>
                        </tbody>
                    </table>

                     <table class="deductions-table-preview">
                        <thead>
                            <tr>
                                <th>Description</th>
                                <th>Current Period</th>
                                <th>Year-to-Date</th>
                            </tr>
                        </thead>
                        <tbody id="livePreviewDeductionsBody">
                            <!-- Example Row (Static, JS will populate) -->
                            <tr>
                                <td>Federal Income Tax</td>
                                <td data-label="Current Period">$100.00</td>
                                <td data-label="Year-to-Date">$100.00</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="summary-preview">
                        <div>Gross Pay: <span id="livePreviewGrossPay">$0.00</span></div>
                        <div>Total Deductions: <span id="livePreviewTotalDeductions">$0.00</span></div>
                        <div>Net Pay: <span id="livePreviewNetPay">$0.00</span></div>
                    </div>
                    
                    <div class="preview-footer">
                        <img id="livePreviewPayrollProviderLogo" src="#" alt="Payroll Provider Logo" class="live-preview-logo" style="display:none;">
                        <div id="livePreviewVoidedCheckContainer" class="voided-check-css-container" style="display:none;">
                            <div class="voided-check-css">
                                <div class="void-text">VOID</div>
                                <div class="check-line payee">Pay to the Order of: ____________________________</div>
                                <div class="check-line amount-box">$ [_______]</div>
                                <div class="check-line date">Date: __________</div>
                                <div class="check-line memo">Memo: __________</div>
                                <div class="check-line signature">____________________________</div>
                                <div class="check-line micr">|: 000000000 |: 11111111 .: 2222</div>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="preview-disclaimer">For educational or entertainment purposes only. This is a simulated document.</p>
            </section>
        </main>
    </div>

    <!-- Payment Modal -->
    <div id="paymentModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close-modal-btn" id="closePaymentModalBtn">&times;</span>
            <h2>Payment & Order Submission</h2>
            
            <div id="paymentInstructions">
                <p>Please complete your payment to finalize your order. The total amount is: <strong id="totalPaymentAmount">$29.99</strong> <span id="paymentDiscountNote" class="discount-note"></span>.</p>
                <p>Scan a QR Code OR manually send the total to the respective ID:</p>
                <div class="qr-code-options">
                    <div class="qr-code-item">
                        <p>Venmo: <strong>$BuellDocs</strong></p>
                        <div class="qr-container">
                            <img src="https://i.ibb.co/s9V5vX4/venmo-qr-code.png" alt="Venmo QR Code"
                                 onerror="this.onerror=null; this.src='https://placehold.co/150x150/1a1a1e/ae8e5d?text=Venmo+QR';">
                        </div>
                    </div>
                    <div class="qr-code-item">
                         <p>Cash App: <strong>$BuellDocsPaystub</strong></p>
                        <div class="qr-container">
                            <img src="https://i.ibb.co/mCDFg1v/cash-app-qr-code.png" alt="Cash App QR Code"
                                 onerror="this.onerror=null; this.src='https://placehold.co/150x150/1a1a1e/ae8e5d?text=CashApp+QR';">
                        </div>
                    </div>
                    <div class="qr-code-item">
                        <p>PayPal: <strong>buellschool@gmail.com</strong></p>
                        <div class="qr-container">
                             <img src="https://i.ibb.co/1fRtJzh/paypal-qr-code.png" alt="PayPal QR Code"
                                 onerror="this.onerror=null; this.src='https://placehold.co/150x150/1a1a1e/ae8e5d?text=PayPal+QR';">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="cashAppTxId">Cash App/Venmo/PayPal Transaction ID <span class="required-asterisk">*</span></label>
                    <input type="text" id="cashAppTxId" name="cashAppTxId" required aria-describedby="cashAppTxIdError" aria-required="true">
                    <span class="error-message" id="cashAppTxIdError"></span>
                </div>
                <button id="confirmPaymentBtn" class="btn btn-primary btn-full-width">Confirm Payment & Submit Order</button>
            </div>

            <div id="modalOrderSuccessMessage" style="display:none;">
                <h3>Thank You!</h3>
                <p>Your (simulated) order details have been noted. To receive your final, clean paystub(s) (without the 'PREVIEW' watermark or novelty disclaimer), please manually email a screenshot of your payment receipt AND the following information to <strong id="supportEmailAddress">buellschool@gmail.com</strong>:</p>
                <ul>
                    <li>Email used on form: <strong id="successUserEmail"></strong></li>
                    <li>Cash App/Payment Transaction ID entered: <strong id="successTxId"></strong></li>
                    <li>Number of Stubs Requested: <strong id="successNumStubs"></strong></li>
                    <li>Additional Notes/Custom Requests: <strong id="successUserNotes">None provided</strong></li>
                </ul>
                <p>(This manual step ensures your order is processed correctly after payment verification. You will receive your document(s) via email typically <strong id="turnaroundTime">within 24 hours</strong>.)</p>
                <button id="closeSuccessMessageBtn" class="btn btn-secondary">Close</button>
            </div>
        </div>
    </div>
    

    <!-- Notification Modal -->
    <div id="notificationModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close-modal-btn" id="closeNotificationModalBtn">&times;</span>
            <h2 id="notificationModalTitle">Notice</h2>
            <p id="notificationModalMessage"></p>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
